<div class="d-flex flex-column"  *ngIf="fullyLoaded|async">
  <div class="d-flex justify-content-center mb-2">

    <!-- Event -->
    <button
      class="btn btn-sm w-100"
      *ngIf="frame && frame.hasEvents"
      [class.btn-primary]="eventsVisible"
      [class.btn-outline-secondary]="!eventsVisible"
      (click)="toggleEvents()"
    >
    <!--
    <ng-container [ngSwitch]="frame.event.type">
      <app-fa-icon
          *ngSwitchCase="RecordEventTypes.KeyComboPress"
          [icon]="FAIconType.keyboard"
        ></app-fa-icon>
        <app-fa-icon
          *ngSwitchCase="RecordEventTypes.KeyPress"
          [icon]="FAIconType.keyboard"
        ></app-fa-icon>
        <app-fa-icon
          *ngSwitchCase="RecordEventTypes.KeyRelease"
          [icon]="FAIconType.keyboard"
        ></app-fa-icon>
        <app-fa-icon *ngSwitchDefault [icon]="FAIconType.mouse"></app-fa-icon>
      </ng-container>
      -->
      <span class="ms-2" [translate]="'recorder.studio.events_n'" [translateParams]="{'n':frame.events.length}"></span>
    </button>



    <!-- Detected Objects -->
    <div class="btn-group btn-group-sm  w-100" *ngIf="frame">
      <button
        class="btn btn-sm  text-nowrap  w-100"
        [class.ms-1]="frame.hasEvents"
        [class.btn-primary]="objectsVisible"
        [class.btn-outline-secondary]="!objectsVisible"
        (click)="toggleObjects()"
      >
        <app-fa-icon [icon]="FAIconType.shapes"></app-fa-icon>
        <span
          class="ms-2 text-nowrap"
          [translate]="'recorder.studio.detected_objects'"
          [translateParams]="{ n: frame.objects.length }"
        ></span>
      </button>
      <button
        class="btn btn-sm"
        [class.btn-primary]="objectsVisible"
        [class.btn-outline-secondary]="!objectsVisible"
        (click)="detectorSettings()"
      >
        <app-fa-icon [icon]="FAIconType.cogs"></app-fa-icon>
      </button>
    </div>

    <!-- Detected Texts -->
    <div class="btn-group btn-group-sm  w-100" *ngIf="frame">
      <button
        class="btn ms-1 btn-sm w-100  text-nowrap"
        [class.btn-primary]="textsVisible"
        [class.btn-outline-secondary]="!textsVisible"
        (click)="toggleTexts()"
      >
        <app-b-icon [icon]="BIconType.textareaT"></app-b-icon>
        <span
          class="ms-2  text-nowrap"
          [translate]="'recorder.studio.detected_texts'"
          [translateParams]="{ n: frame.texts.length }"
        ></span>
      </button>
      <button
        class="btn btn-sm"
        [class.btn-primary]="textsVisible"
        [class.btn-outline-secondary]="!textsVisible"
        (click)="textDetectionSettings()"
      >
        <app-fa-icon [icon]="FAIconType.cogs"></app-fa-icon>
      </button>
    </div>

    <!-- Trains -->
    <div class="btn-group btn-group-sm  w-100" *ngIf="frame">
    <button
      class="btn ms-1 btn-sm w-100  text-nowrap"
      [class.btn-primary]="trainVisible"
      [class.btn-outline-secondary]="!trainVisible"
      (click)="toggleTrain()"
    >
      <app-b-icon [icon]="BIconType.boundingBox"></app-b-icon>
      <span
        class="ms-2 text-nowrap"
        [translate]="'recorder.studio.train'"
        [translateParams]="{ n: frame.train.length }"
      ></span>
    </button>
    <button
        class="btn btn-sm "
        [class.btn-primary]="trainVisible"
        [class.btn-outline-secondary]="!trainVisible"
      >
        <app-fa-icon [icon]="FAIconType.cogs"></app-fa-icon>
      </button>
    </div>

    <!-- Suggestions Selector-->
    <div class="btn-group btn-group-sm  w-100" *ngIf="frame.hasEvents && frame.hasSuggestion">

      <button
        class="btn ms-1 btn-sm w-100  text-nowrap"
        [class.btn-primary]="suggestionsVisible"
        [class.btn-outline-secondary]="!suggestionsVisible"
        (click)="toggleSuggestions()"
      >
        <app-fa-icon [icon]="FAIconType.handPointer"></app-fa-icon>
        <span class="ms-2" *ngIf="frame.suggestions.length == 0" translate
          >detector.suggestion.title</span
        >
        <span
          class="ms-2"
          *ngIf="frame.suggestions.length > 0"
          [translate]="'detector.suggestion.title_n'"
          [translateParams]="{ n: frame.suggestions.length }"
        ></span>
      </button>
      <button
        class="btn btn-sm "
        [class.btn-primary]="suggestionsVisible"
        [class.btn-outline-secondary]="!suggestionsVisible"
        (click)="listSuggestions()"
      >
        <app-fa-icon [icon]="FAIconType.list"></app-fa-icon>
      </button>
    </div>

    <!-- Action Selector-->
    <div class="btn-group btn-group-sm  w-100" *ngIf="frame.hasEvents && frame.hasActions">

      <button
        class="btn ms-1 btn-sm w-100  text-nowrap"
        [class.btn-primary]="actionsVisible"
        [class.btn-outline-secondary]="!actionsVisible"
        (click)="toggleActions()"
      >
        <app-fa-icon [icon]="FAIconType.handPointer"></app-fa-icon>
        <span class="ms-2" [translate]="'recorder.action.title_n'" [translateParams]="{'n':frame.actions.length}"></span>
      </button>
      <button
        class="btn btn-sm "
        [class.btn-primary]="actionsVisible"
        [class.btn-outline-secondary]="!actionsVisible">
        <app-fa-icon [icon]="FAIconType.list"></app-fa-icon>
      </button>
    </div>
  </div>
  <div class="d-flex justify-content-center align-items-center w-100">
    <app-image-annotator
      *ngIf="(loading | async) == undefined"
      (doubleClicked)="boxDetail($event)"
      (onBoxUpdated)="boxUpdate($event)"
      [settings]="settings"
      [url]="imageUrl"
      [highlights]="highlights"
      [boxes]="boxes"
    ></app-image-annotator>
  </div>
</div>
