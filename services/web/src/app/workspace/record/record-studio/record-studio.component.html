<div class="card shadow border-0">
  <div class="card-header">
    <div class="d-flex w-100">
    <app-fa-icon [icon]="FAIconType.university"></app-fa-icon>
    <span class="ms-1" translate>workspace.record.studio.title</span>
    <span class="ms-1">|</span>
    <span class="ms-1">{{ record?.name }}</span>
    <span class="ms-auto">
      <span class="pointer user-select-none">
        <app-fa-icon [icon]="FAIconType.arrowLeft"></app-fa-icon>
        <span class="ms-2">Back to record list</span>
      </span>
    </span>
  </div>
  </div>

  <div class="card-body">
    <div class="d-flex justify-content-center mb-2">
      <div class="btn-group btn-group-sm">
        <button class="btn btn-outline-primary">Play</button>
        <button class="btn btn-primary">Train</button>
        <button class="btn btn-outline-primary">Replay</button>
      </div>
    </div>

    <div class="d-flex justify-content-center mb-2">
      <!-- Frame Selector -->
      <button
        class="btn btn-outline-secondary  btn-sm w-100"
        (click)="selectFrame()"
      >
        <app-fa-icon [icon]="FAIconType.images"></app-fa-icon>
        <span *ngIf="frame==undefined" class="ms-2" translate>workspace.record.studio.frames</span>
        <span *ngIf="frame!=undefined" class="ms-2" [translate]="'workspace.record.studio.selected_frame'" [translateParams]="{'n':frame.count.toString()}"></span>
      </button>

      <!-- Video Selector -->
      <button
        class="btn btn-outline-secondary ms-1 btn-sm w-100"
        (click)="viewVideo()"
      >
        <app-fa-icon [icon]="FAIconType.video"></app-fa-icon>
        <span class="ms-2" translate>workspace.record.studio.video</span>
      </button>

      <!-- Suggestions Selector-->
      <button
        class="btn btn-outline-secondary ms-1 btn-sm w-100"
        (click)="viewSuggestions()"
      >
        <app-fa-icon [icon]="FAIconType.handPointer"></app-fa-icon>
        <span class="ms-2" *ngIf="frame && frame.suggestions.length == 0" translate>workspace.detector.suggestion.title</span>
        <span class="ms-2" *ngIf="frame && frame.suggestions.length  > 0" [translate]="'workspace.detector.suggestion.title_n'" [translateParams]="{n:frame.suggestions.length}"></span>
      </button>

      <!-- Train Selector -->
      <button
        class="btn btn-outline-secondary ms-1 btn-sm w-100"
        (click)="viewTrain()"
      >
        <app-fa-icon [icon]="FAIconType.shapes"></app-fa-icon>
        <span class="ms-2" *ngIf="totalTrainingObjects == 0" translate>workspace.record.studio.train</span>
        <span class="ms-2" *ngIf="totalTrainingObjects > 0" [translate]="'workspace.record.studio.train_n'" [translateParams]="{'n':totalTrainingObjects}"></span>
      </button>
    </div>

    <ng-container *ngIf="recordId && detector && detector._id">
      <app-record-frame
        (objects)="onUpdateDetectedObjects($event)"
        (boxes)="onUpdateFrameBoxes($event)"
        (suggestions)="onUpdateDetectorSuggestions($event)"
        (texts)="onUpdateDetectedTexts($event)"
        [frame]="frame"
        *ngIf="frame"
      ></app-record-frame>
    </ng-container>
  </div>

  <app-loader
    [cardFooter]="true"
    [error]="error"
    [loading]="loading"
  ></app-loader>
</div>
